(this["webpackJsonpcrosschain.quest"]=this["webpackJsonpcrosschain.quest"]||[]).push([[5],{2107:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));var a={average:.67,fast:1,fastest:1.5},i=function(e){var t,n=e.inboundData,a=e.chain,i=n.find((function(e){return e.chain===a}));return Number(null!==(t=null===i||void 0===i?void 0:i.gas_rate)&&void 0!==t?t:0)},s=function(e){var t=e.inboundData,n=e.chain,s=e.feeOptionType;return i({inboundData:t,chain:n})*a[s]}},2109:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(0),i=n(37),s=n(213),c=n(278),o=n(2107),r=function(e){var t=e.inputAsset,n=e.outputAsset,r=Object(s.a)().feeOptionType,u=Object(c.a)(),d=u.inboundData,l=u.pools,b=Object(a.useMemo)((function(){var e=Object(o.b)({inboundData:d,chain:t.L1Chain,feeOptionType:r});return i.NetworkFee.getNetworkFeeByAsset({asset:t,gasRate:e,direction:"inbound"})}),[t,d,r]),p=Object(a.useMemo)((function(){if(!n)return null;var e=Object(o.a)({inboundData:d,chain:n.L1Chain});return i.NetworkFee.getNetworkFeeByAsset({asset:n,gasRate:e,direction:"outbound"})}),[n,d]),j=Object(a.useMemo)((function(){if(!p)return b;var e=new i.AssetAmount(t,i.Amount.fromAssetAmount(p.totalPriceIn(t,l).price,t.decimal));return b.asset.eq(t)?b.add(e):new i.AssetAmount(t,i.Amount.fromAssetAmount(b.totalPriceIn(t,l).price,t.decimal)).add(e)}),[t,b,p,l]),m=Object(a.useMemo)((function(){return j.totalPriceIn(i.Asset.USD(),l)}),[j,l]);return{totalFee:j,inboundFee:b,outboundFee:p,totalFeeInUSD:m}}},2110:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),i=n(905),s=n(278),c=n(172),o=function(){var e=Object(s.a)(),t=e.addNewTxTracker,n=e.updateTxTracker,o=e.clearTxTrackers,r=e.processSubmittedTx;return{submitTransaction:Object(a.useCallback)((function(e){var n=e.type,a=e.submitTx,s=Object(i.a)();return t({uuid:s,type:n,status:c.b.Submitting,submitTx:a,action:null,refunded:null}),s}),[t]),pollTransaction:Object(a.useCallback)((function(e){var t=e.uuid,a=e.submitTx,i=e.type;n({uuid:t,txTracker:{status:c.b.Pending,submitTx:a}}),r({submitTx:a,type:i})}),[n,r]),clearTxTrackers:o,setTxFailed:Object(a.useCallback)((function(e){n({uuid:e,txTracker:{status:c.b.Failed}})}),[n])}}},2118:function(e,t,n){"use strict";n.r(t);var a,i=n(1),s=n.n(i),c=n(8),o=n(25),r=n(0),u=n(5),d=n(341),l=n(37),b=n(172),p=n(171),j=n(2109),m=n(2110),f=n(93),O=n(289),g=n(106),x=n(12),h=n(9),y=n(7),C=n(64),w=Object(h.d)(d.Panel).withConfig({displayName:"Upgradestyle__Container",componentId:"sc-1byr4wb-0"})(["display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;background:",";margin-left:auto;margin-right:auto;padding-top:0px;border-radius:14px;border:1px solid ",";"],Object(y.palette)("background",0),Object(y.palette)("gray",0)),A=h.d.div.withConfig({displayName:"Upgradestyle__ContentPanel",componentId:"sc-1byr4wb-1"})(["display:flex;flex-direction:column;width:100%;padding:16px 8px 8px 8px;",""],C.a.sm(a||(a=Object(x.a)(["\n    padding: 16px 12px 4px 12px;\n  "])))),v=(h.d.div.withConfig({displayName:"Upgradestyle__PoolSelect",componentId:"sc-1byr4wb-2"})(["display:flex;justify-content:space-between;align-items:center;padding:8px 16px;"]),h.d.div.withConfig({displayName:"Upgradestyle__FormItem",componentId:"sc-1byr4wb-3"})(["display:flex;flex-direction:column;margin:8px 0;"])),T=(Object(h.d)(d.Label).attrs({weight:"bold"}).withConfig({displayName:"Upgradestyle__FormLabel",componentId:"sc-1byr4wb-4"})(["margin-bottom:8px;"]),h.d.div.withConfig({displayName:"Upgradestyle__ConfirmModalContent",componentId:"sc-1byr4wb-5"})(["display:flex;flex-direction:column;padding:10px;"])),k=(h.d.div.withConfig({displayName:"Upgradestyle__MemoTypes",componentId:"sc-1byr4wb-6"})(["display:flex;align-items:center;justify-content:space-between;width:130px;"]),h.d.div.withConfig({displayName:"Upgradestyle__ConfirmButtonContainer",componentId:"sc-1byr4wb-7"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:0 2%;margin-top:14px;button{flex:1;}"])),S=n(2),N=function(e){var t=e.runeToUpgrade,n=e.wallet,a=Object(m.a)(),i=a.submitTransaction,p=a.pollTransaction,x=a.setTxFailed,h=Object(r.useState)(t[0]),y=Object(o.a)(h,2),C=y[0],N=y[1],U=Object(r.useState)(l.Amount.fromAssetAmount(0,8)),F=Object(o.a)(U,2),I=F[0],_=F[1],R=Object(r.useState)(0),M=Object(o.a)(R,2),D=M[0],P=M[1],B=Object(r.useState)(!1),E=Object(o.a)(B,2),L=E[0],H=E[1],q=Object(r.useState)(""),W=Object(o.a)(q,2),J=W[0],Y=W[1],z=f.a.getWalletAddressByChain(u.l.THORChain)||"",G=Object(r.useMemo)((function(){return n?Object(l.getAssetBalance)(C,n).amount:l.Amount.fromAssetAmount(0,8)}),[C,n]),K=Object(j.a)({inputAsset:C}).inboundFee;Object(r.useEffect)((function(){var e=f.a.getWalletAddressByChain(u.l.THORChain);Y(e||"")}),[]);var Q=Object(r.useCallback)((function(e){N(e)}),[]),V=Object(r.useCallback)((function(e){e.gt(G)?(_(G),P(100)):(_(e),P(e.div(G).mul(100).assetAmount.toNumber()))}),[G]),X=Object(r.useCallback)((function(e){P(e);var t=G.mul(e).div(100);_(t)}),[G]),Z=Object(r.useCallback)((function(){X(100)}),[X]),$=Object(r.useCallback)(Object(c.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!1),!C||!J){e.next=16;break}return t=new l.AssetAmount(C,I),n=i({type:b.c.Switch,submitTx:{inAssets:[{asset:C.toString(),amount:I.toSignificant(6)}],outAssets:[{asset:l.Asset.RUNE().toString(),amount:I.toSignificant(6)}],recipient:J}}),e.prev=4,e.next=7,f.a.upgrade({runeAmount:t,recipient:J});case 7:a=e.sent,p({type:b.c.Switch,uuid:n,submitTx:{inAssets:[{asset:C.toString(),amount:I.toSignificant(6)}],outAssets:[{asset:l.Asset.RUNE().toString(),amount:I.toSignificant(6)}],txID:a,submitDate:new Date,recipient:J}}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),x(n),Object(d.Notification)({type:"error",message:"Submit Transaction Failed.",duration:20}),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[4,11]])}))),[C,I,i,p,J,x]),ee=Object(r.useCallback)((function(){H(!1)}),[]),te=Object(r.useCallback)((function(){J?f.a.validateAddress({chain:u.l.THORChain,address:J})?H(!0):Object(d.Notification)({type:"error",message:"Invalid Recipient Address",description:"Recipient address should be a valid address."}):Object(d.Notification)({type:"info",message:"You have to connect wallet for Thorchain."})}),[J]),ne=Object(r.useMemo)((function(){return Object(S.jsxs)(T,{children:[Object(S.jsx)(d.Information,{title:"Upgrade",description:"".concat(C.ticker.toUpperCase()," (").concat(C.type.toUpperCase(),")")}),Object(S.jsx)(d.Information,{title:"Transaction Fee",description:K.toCurrencyFormat(),tooltip:g.i}),Object(S.jsx)("br",{}),Object(S.jsx)(d.Information,{title:"Recipient Address",description:Object(O.b)(J)})]})}),[K,C,J]),ae=Object(r.useMemo)((function(){return"Upgrade ".concat(C.chain," RUNE")}),[C]);return Object(S.jsxs)(w,{children:[Object(S.jsx)(d.Helmet,{title:ae,content:ae}),Object(S.jsx)(d.ContentTitle,{children:ae}),Object(S.jsxs)(A,{children:[Object(S.jsx)(d.AssetInputCard,{title:"upgrade",asset:C,assets:t,selectDisabled:2!==t.length,amount:I,balance:G,onChange:V,onSelect:Q,onMax:Z,wallet:n||void 0}),Object(S.jsx)(d.Slider,{value:D,onChange:X,withLabel:!0}),Object(S.jsx)(v,{children:Object(S.jsx)(d.Information,{title:"Transaction Fee",description:K.toCurrencyFormat(),tooltip:g.i})}),Object(S.jsx)(d.AddressSelectCard,{title:"Recipient Address",address:J,chain:u.l.THORChain,chainAddr:z,onAddressChange:Y}),Object(S.jsx)(k,{children:Object(S.jsx)(d.FancyButton,{onClick:te,error:!1,children:"Upgrade"})})]}),Object(S.jsx)(d.ConfirmModal,{visible:L,onOk:$,onCancel:ee,inputAssets:[C],children:ne})]})},U=function(){var e=Object(p.a)().wallet,t=Object(r.useMemo)((function(){return Object(l.getRuneToUpgrade)(e)}),[e]),n=Object(r.useMemo)((function(){return t&&Object(l.hasWalletConnected)({wallet:e,inputAssets:t})}),[e,t]);return e&&n?t&&0!==t.length?Object(S.jsx)(N,{runeToUpgrade:t,wallet:e}):Object(S.jsx)(w,{children:Object(S.jsx)(d.Label,{children:"You don't have BEP2 or ERC20 RUNE to upgrade."})}):Object(S.jsx)(w,{children:Object(S.jsx)(d.Label,{children:"Please connect a wallet."})})};t.default=U}}]);
//# sourceMappingURL=5.4742feca.chunk.js.map